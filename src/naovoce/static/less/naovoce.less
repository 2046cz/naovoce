@import "bootstrap";
@import "clusters";


@beige: #EBE6DE;
@green:#82B241;
@left_gutter: 5rem;



html {
	overflow-x: hidden;
}

@-ms-viewport {
	width: device-width;
}
.logo{
	margin:1.2rem @left_gutter;
	img{
		width: 10rem;
		height:auto;
	}
}
a{
	display:inline-block;
}

.blurred(@radius: 5px) {
	filter: blur(@radius);
}
body{
	font-family: 'Source Sans Pro', sans-serif;
    -webkit-font-smoothing: antialiased;
}
body:before {
	content: " ";
	background-image: url("@{base-url}/img/bg.svg");
	background-position: center -40px;
	background-repeat: repeat-y;
	position: fixed;
	width: 100%;
	height: 100%;
	z-index: -1;

	.blurred;
}



textarea {
    resize: none;
}

// honeypot:
.tamper {
	display: none;
}

#cookie-monster {
	text-align: center;
	margin: 0;
	padding: 2px 30px 4px;
	font-size: 90%;
	background: white;
}

.container {
	padding: 0 30px;
}

small {
	color: @brand-primary;
	font-weight: normal;
}

.heading-color(@col) {
	color: @col;
	a {
		color: @col;
		&:hover { color: darken(@col, 15%); }
	}
}

h1, h2 {
	.heading-color(@brand-secondary);
}

h3 {
	.heading-color(@brand-tertiary);
}

h4, h5, h6 {
	.heading-color(@brand-primary);
}

.panel-heading {
	font-weight: bold;
	&.subheading {
		background: white;
		color: @brand-primary;
		font-weight: normal;
		padding: 15px;
		.btn {
			width: 100%;
		}
	}
}

.avatar {
	height: 50px;
	width: 50px;
	color: transparent;
	display: inline-block;
}

.media .avatar {
	padding: 0;
	margin-right: 10px;
}

form {
	label small {
		color: @brand-info;
		font-weight: normal;
	}
	.btn + .btn,
	.btn + a {
		margin-left: 10px;
	}
	&.image-form,
	&.comment-form {
		display: none;
		&.errors {
			display: block;
		}
		#id_text.complaint {
			background: @state-danger-bg;
			color: @state-danger-text;
			border-color: @state-danger-border;
		}
	}
	&.panel-body .form-group:last-of-type {
		margin-bottom: 0;
		.checkbox {
			margin-bottom: 0;
		}
	}
	.avatar-group {
		.avatar {
			width: 60px;
			height: 60px;
		}
	}
	.inputfile {
		width: 0.1px;
		height: 0.1px;
		opacity: 0;
		overflow: hidden;
		position: absolute;
		z-index: -1;
		& + label {
			.btn;
			.btn-default;
			color: @text-color;
			width: 100%;
			text-align: center;
			text-overflow: ellipsis;
			white-space: nowrap;
			overflow: hidden;
		}
		& + label:hover {
			color: @text-color;
		}
	}
	.has-error .inputfile + label {
		color: #a94442;
		border-color: #a94442;
	}
}

hr {
	border-top: 1px dotted @brand-primary;
}

.container {
	background: white;
}

.unspaced {
	margin: 0;
}
#user-info{
	height:8rem;
	background:@beige;
	p{
		.btn;
		a{
			color:#fff;
		}
	}
 	a.messages-count {
		display: inline-block;
		background: @brand-tertiary;
		color: white;
		padding: 1px 8px;
		border-radius: 20px;
		&:hover,
		&:active,
		&.active {
			background: darken(@brand-tertiary, 5%);
			text-decoration: none;
		}
		.envelope {
			display: inline-block;
			width: 16px;
			height: 10px;
			margin-left: 5px;
			background: url('@{base-url}/img/envelope.svg') left bottom no-repeat;
			background-size: 16px;
		}
	}
}

.leaflet-bar{
	box-shadow:0 0 0 rgba(255, 255, 255, 0);
}
.leaflet-touch{
	.leaflet-left{
		margin-left:@left_gutter;
		a, input{
			.shadow;	
			background:#fff;
			border:0;
			border-radius: 2rem !important;
			width:3.6rem;
			height:3.6rem;
			color:@green;
			&:hover, &:active, &:focus{
				box-shadow:0 0 1rem rgba(55, 55, 55, 0.5);		
				background:#fff;
				border:0;
				border-radius: 2rem !important;
				width:3.6rem;
				height:3.6rem;
				text-decoration:none;
			}
			&:first-child{
				margin-bottom:1rem;
			}
		}
		.leaflet-control-zoom{
			margin-top:4rem;
		}
		.leaflet-control-zoom-in{
			padding: 0.04rem 0 0 0;
	    	font-size: 2.8rem;
		}
		.leaflet-control-zoom-out{
			padding: 0.2rem 0 0 0;
	    	font-size: 2.8rem;
		}
		.geocoder-control{
			margin-top: 3px;
		}
		.geocoder-control-input{
			padding: 1.6rem;
			
		}
		.geocoder-control-expanded{
			input.geocoder-control-input{
				width:275px;
			}
		}
	}
}
#main-content {
	padding-bottom: 20px;
}
#catalogue{
	position: absolute;
	z-index: 999;
	bottom: 3rem;
	left: @left_gutter;
	top:auto;
	a{
		.btn;
		.shadow;
		padding: 1.2rem 2rem 1rem 2rem;
		margin-right:1.32rem;
		line-height:1.4rem;
		&:active, &.active{
			box-shadow: inset 0 0 0 rgba(0, 0, 0, 0) !important;		}
	}

}

.handle{
	display:none; // hide this guy on all pages but map, see bellow
	float:right;
	background:url() @green;
	width:8rem;
	height:8rem;
	justify-content:center;
	align-items:center;
	img{
		width:3.5rem;
	}
	.anim_q_;
	&.open{
		.anim_q_;
		width:25rem
	}
}
body.map{
	.handle{
		display:flex;
	}
}
#filter{
	.anim_q_;
	position: absolute;	
	z-index: 999;
	top:0;
	right:-25rem;
	// right:0rem;
	width:25rem;
	&.open{
		.anim_q_;
		right:0;
		background:@beige;
	}

	a {
		display: inline-block;
		color: @brand-secondary;
		&:hover {
			cursor: pointer;
		}
	}
	&.filter-active {
		.toggler {
			width: 60%;
		}
		.canceller {
			display: inline-block;
		}
	}
	.fruit-icon-small{
		float:right;
	}
	#filter-items{
		display:flex;
		.kinds{
			display:flex;
			flex-flow:column;
			background-color: @beige;
			&.active{
				background-color: #fff;
			}
			a{
				width:7rem;
				height:8rem;
			}
			.class-choice {
				display: flex;
				align-items:flex-end;
				justify-content:center;
				background-image: url("@{base-url}/img/kinds.svg");
				background-repeat:no-repeat;
				padding-bottom:0.5rem;

				&.active {
					background-color: #fff;
				}
				&.tree {
					background-position: 11px 50%;
				}
				&.bush {
					background-position: -39px 50%;
				}
				&.herb {
					background-position: -87px 50%;
				}
				&.nut{
					background-position: -138px 50%;
				}
			}
		}

		.kinds-list {
			display:none;
			margin: 0;
			width:18rem;
			background: white;
			padding:1rem 0;
			.list-unstyled;
			&.active{
				display:block;
				display: flex;
    			flex-flow: column;
			}
			a {
				display: block;
				line-height: 20px;
				border-bottom:1px solid #ccc;
				&:active {
					background-color: @brand-success;
				}
			}
			li{
				padding:0.1rem 1.5rem;
			}
		}
	}
}

@keyframes popout {
    from {
		box-shadow: none;
    }
    50% {
		box-shadow: 0 0 20px 10px white;
    }
    to {
		box-shadow: none;
    }
}

#catalogue{
	bottom: 3rem;
	top:auto;
	a{
		.btn;
		.shadow;
		padding: 1.2rem 2rem 1rem 2rem;
		margin-right:1.32rem;
		line-height:1.4rem;
	}

}
#add-to-map{
	.btn;
	.shadow;
	position:absolute;
	z-index:999;
	bottom: 29px;
    font-size: 1.2rem;
    padding: 1rem 2rem 1rem 3rem;
    left: 291px;
    right:auto;
    line-height:inherit;
    .fruit-icon-small{
    	position:absolute;
    	left:5px;
    	top:7px;
    	font-size: 16px;
    }
}

ul.messages {
	margin-top: 20px;
	.date {
		opacity: 0.4;
		margin-right: 10px;
	}
	.alert-info {
		.alert-success;
	}
	.alert-unimportant {
		background-color: @btn-default-bg;
		border-color: @btn-default-border;
		color: lighten(@btn-default-color, 50%);
		a {
			color: lighten(@btn-default-color, 50%);
		}
	}
}

ul.errorlist.nonfield {
	.list-unstyled;
	li {
		.alert;
		.alert-danger;
	}
}

.panel {
	margin-top: @grid-gutter-width;
	.panel-footer {
		background: white;
	}
}

.make-marker(@size) {
	font-family: 'ff';
	height: @size;
	width: @size;
	font-size: @size;
	line-height: @size;
	text-align: center;
	display: inline-block;
}

.marker {
	.make-marker(@marker-size);
	margin: -@marker-size 0 0 -@marker-size/2;
}

.fruit-icon-huge {
	.make-marker(55px);
}

.fruit-icon-large {
	.make-marker(40px);
}

.fruit-icon-small {
	.make-marker(20px);
}

.detail-info {
	padding: 20px 0;
	h3, p {
		margin: 0;
	}
	.geo {
		font-weight: bold;
	}
	.fruit-description,
	.motto {
		background: #ffea80;
		border: 1px solid darken(#ffea80, 20%);
		padding: 15px;
		margin-top: 20px;
	}
}

#map-detail {
	height: 300px;
	margin-bottom: 20px;
}

.quick-links {
	padding: 0;
	margin: 0;
	li {
		display: inline;
		margin: 0 20px 0 0;
		padding: 0;
	}
}
.leaflet-left .leaflet-control{
	margin-left:0;
}

.leaflet-popup-content {
	min-height: 1px;
	p {
		margin: 0 !important;
		color: @brand-primary;
	}
	a {
		color: @brand-secondary !important;
	}
	h4 {
		margin: 0 0 5px 0;
	}
}

#spinner {
	@spinner-size: 60px;
	height: @spinner-size;
	width: @spinner-size;
	border-left: 6px solid fadeout(@brand-secondary, 60%);
	border-right: 6px solid fadeout(@brand-secondary, 60%);
	border-bottom: 6px solid fadeout(@brand-secondary, 60%);
	border-top: 6px solid @brand-secondary;
	border-radius: 100%;
	z-index: 9999;

	position: absolute;
	left: 50%;
	top: 50%;
	margin: -@spinner-size/2 0 0 -@spinner-size/2;

	display: none;
	&.spinning {
		display: block;
		-webkit-animation: rotation .6s infinite linear;
		animation: rotation .6s infinite linear;
	}
	@-webkit-keyframes rotation {
		from {
			-webkit-transform: rotate(0deg);
		}
		to {
			-webkit-transform: rotate(359deg);
		}
	}
	@keyframes rotation {
		from {
			transform: rotate(0deg);
		}
		to {
			transform: rotate(359deg);
		}
	}
}

.comment:last-of-type {
	margin-bottom: 20px;
}

.comment-text {
	height: 50px;
	position: relative;
	padding: 10px;
	background: @gray-lighter;
	overflow: visible;
	font-size: 12px;
	color: @brand-primary;
	.author {
		display: block;
		border-bottom: 2px solid white;
		margin-bottom: 5px;
		padding-bottom: 5px;
		a, a:hover {
			color: @brand-tertiary;
		}
		font-weight: bold;
		.created {
			float: right;
			color: @brand-primary;
			font-weight: normal;
		}
	}
	.rejected {
		color: lighten(@gray-base, 75%);
	}
	&:after {
		content: '';
		position: absolute;
		border-style: solid;
		border-width: 10px 10px 10px 0;
		border-color: transparent @gray-lighter;
		display: block;
		left: -10px;
		top: 10px;
	}
	&.complaint {
		background: @state-danger-bg;
		color: @state-danger-text;
		&:after {
			border-color: transparent @state-danger-bg;
		}
	}
}

.gallery-link {
	display: block;
	color: white;
	&:active,
	&:hover {
		color: white;
	}
	span {
		background: @brand-secondary;
		line-height: 2em;
		display: block;
		padding: 0 0.8em 0.1em;
		width: 100%;
	}
}

.thumb-large {
	.make-sm-column(6);
	margin: @grid-gutter-width/2 0;
	display: block;
	img {
		.img-responsive;
	}
	.caption {
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		padding: 5px 10px;
		margin: 0 @grid-gutter-width/2;
		background: rgba(0, 0, 0, 0.4);
		color: white;
		font-size: 90%;
		font-style: italic;
		opacity: 1;
		transition: opacity 1s;
	}
	&:active,
	&:hover {
		.caption {
			opacity: 0;
		}
	}
}

.browser {
	margin: @grid-gutter-width/2 0;
	max-height: 600px;
	.img-current {
		display: block;
		margin: 0 auto;
		max-width: 100%;
		max-height: 600px;
	}
}


.leaflet-bottom {
	right: 2rem;
    left: auto;
    a{
    	background:transparent;
    	height:auto;
    	width:auto;
    	box-shadow: rgba(55, 55, 55, 0);
    }
}
.leaflet-touch .leaflet-control-layers, .leaflet-touch .leaflet-bar{
	border: 0;
}
// fancy 
.slash{
	margin:0 0.4rem;
}
.btn{
  .anim_q;
  background-color:@green;
  color:#fff;
  border-radius:1rem;
  letter-spacing: 0.01rem;
  padding: 0.8rem 1.6rem;
  border-radius: 2rem;
  text-align: center;
  display: inline-block;
  text-decoration: none;
  text-transform:uppercase;
  &.active, &:hover, &:focus, &:active{
    .anim_q;
    text-decoration: none;
    background-color:mix(@green, @beige, 90%);
    color:#fff;
  }
}
.shadow{
	box-shadow:0 0 1rem rgba(55, 55, 55, 0.5);	
	&:hover{
		box-shadow:0 0 1rem @green;	
	}
}
.anim_q{
   transition: all 0.3s cubic-bezier(0.610, 1.330, 0.825, 0.825);
}
.anim_q_{
   transition: all 0.6s cubic-bezier(0.610, 1.330, 0.825, 0.825);
}
// MEDIA QUERY 

@media (min-width: 768px) {
	.container {
		max-width: 750px;
	}
}